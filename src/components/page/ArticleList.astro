---
import type { CollectionEntry } from "astro:content";
import type { Page } from "astro";

import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card";

interface Props {
	page: Page<CollectionEntry<"blog">>;
}
const { page } = Astro.props;
---

<article class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 w-full max-w-5xl justify-items-center">
  {page.data.map((post: CollectionEntry<'blog'>) => (
    <Card className="w-full max-w-xs flex flex-col h-full min-h-[200px] p-2">
      <CardHeader className="p-0">
        <img
          src={`https://storage.r2.ogatakatsuya.com/${post.data.title}.png`}
          alt={post.data.title}
          width="1200"
          height="630"
          class="w-full object-cover rounded-t-md"
          loading="lazy"
        />
        <CardTitle className="p-4">
          <a href={`/blog/${post.id}`} class="hover:underline font-medium">
            {post.data.title}
          </a>
        </CardTitle>
      </CardHeader>
      <CardContent className="pb-4 px-4">
        <div class="text-sm text-gray-500 mb-2">{post.data.date.toISOString().split("T")[0]}</div>
        <div class="flex flex-wrap gap-2 mb-2">
          {post.data.tags?.map((tag) => (
            <span class="bg-blue-100 text-blue-700 rounded px-2 py-0.5 text-xs">{tag}</span>
          ))}
        </div>
      </CardContent>
    </Card>
  ))}
</article>