---
import { getCollection } from "astro:content";

import Layout from "@/layouts/BaseLayout.astro";
import ProductCard from "@/components/page/ProductCard.astro";
import Title from "@/components/page/Title.astro";

const products = await getCollection("product");
---

<Layout
	title="Product | Ogata Katsuya's Portfolio"
	description="開発したプロダクトやサービスをご紹介します。"
	pagefind={true}
	og={{
		enabled: true,
		image: new URL("/og-image.png", Astro.url),
	}}
	type="website"
>
	<Title title="Product" />
	<div class="flex flex-col items-center w-full mb-16">
		<div class="container mx-auto px-4 sm:px-6 lg:px-8 w-full">
			<div class="max-w-7xl mx-auto flex justify-center">
				<!-- プロダクトカード一覧 -->
				{products.length > 0 ? (
					<div class="flex flex-col max-w-4xl w-full">
						{products.map((product) => (
							<div class="mb-4">
								<ProductCard
									title={product.data.title}
									description={product.data.description}
									slug={product.data.slug}
									link={product.data.link}
									image={product.data.image}
								/>
							</div>
						))}
					</div>
				) : (
					<div class="text-center py-12">
						<p class="text-gray-600 dark:text-gray-400">
							プロダクトはまだ登録されていません
						</p>
					</div>
				)}
			</div>
		</div>
	</div>
</Layout>
